image:
- Visual Studio 2019
- Ubuntu1804

nuget:
  disable_publish_on_pr: true

environment:
  nuget.APIKEY:
    secure: S5nu22JyIbNNHLcucz57YAIqqIfuk4Bv8lVJ9PMz1/SpBnXySi1gELOrbJi+G0Au
  github.PrivateKey:
    secure: 93ji82qMuJlIsC0+MtCRm4f7Up5ebfSTDOTB5NW/zYGKhAFmlDHPXQYX4bGWvoHK7H2TY2xYhcq4RNaN5TZf3AjMB71T084lE1ZMhkD/q/dP6+m7t798FemmLVlSQwZM3TX5b/RJgWVuB9d3W90CBAqsAZh6k9ROPVHfoLsKM0JTvkoctkkAZfqJtSVn/vDkEjcgk1z2zDW26oFY0b7MJpdXV8VJdsr/s3E29P33npUCC+AyD6r3KHkw6PnOuNr1md/R5r1AnVEdveBv/n+dAygXROWPaMbpdW2vuxsJbhFYYrgUkDn3Swk+rk+vYZW97pAax0N2guHQk1uLBWICfLw7wTK9ARmwXzW1JkJX9U/pKgdLXwRtmZMJbsrgzv8nhp/nBKQ3YkSwBkow41g23qE2sN0f250AO4T0zDD0s/gP2WBr37WHz5r2oZW7wGqGXLAXhNZNCYJFTVxMHfvNjw==

install: 
  - ps: $key = $env:github.PrivateKey #just the key contents, copied from notepad, into the environment variable on the UI 
  - ps: $fileContent = "-----BEGIN RSA PRIVATE KEY-----" + "`n" 
  - ps: for ($i = 0; $i -lt $key.Length / 64; $i++) { $min = [math]::min(64, $key.Length - ($i * 64)); $fileContent += $key.substring($i*64, $min) + "`n"; } 
  - ps: $fileContent += "-----END RSA PRIVATE KEY-----" + "`n" 
  - ps: Set-Content c:\users\appveyor\.ssh\id_rsa $fileContent

before_build:
  - ps: |
        choco install docfx
        dotnet tool install --global git-flow-version
build_script:
  - ps: build.ps1
after_build:
  - ps: |
      Update-AppveyorBuild -Version $env:version
build:
  verbosity: detailed