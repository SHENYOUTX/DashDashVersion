image:
- Visual Studio 2017
- Ubuntu1804

nuget:
  disable_publish_on_pr: true

install: 
  - ps: $key = $env:github.PrivateKey #just the key contents, copied from notepad, into the environment variable on the UI 
  - ps: $fileContent = "-----BEGIN RSA PRIVATE KEY-----" + "`n" 
  - ps: for ($i = 0; $i -lt $key.Length / 64; $i++) { $min = [math]::min(64, $key.Length - ($i * 64)); $fileContent += $key.substring($i*64, $min) + "`n"; } 
  - ps: $fileContent += "-----END RSA PRIVATE KEY-----" + "`n" 
  - ps: Set-Content c:\users\appveyor\.ssh\id_rsa $fileContent

before_build:
  - ps: |
        choco install docfx
        dotnet tool install --global coverlet.console
        dotnet tool install --global git-flow-version
build_script:
  - ps: build.ps1
after_build:
  - ps: |
      Update-AppveyorBuild -Version $env:version
build:
  verbosity: minimal